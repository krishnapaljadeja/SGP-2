<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuiziFY - Add New Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
      rel="stylesheet"
    />
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              'inter': ['Inter', 'sans-serif'],
            },
            colors: {
              primary: {
                50: '#f0f9ff',
                500: '#0ea5e9',
                600: '#0284c7',
                700: '#0369a1',
              },
              secondary: {
                500: '#d946ef',
                600: '#c026d3',
              },
              dark: {
                50: '#f8fafc',
                300: '#cbd5e1',
                400: '#94a3b8',
                500: '#64748b',
                600: '#475569',
                700: '#334155',
                800: '#1e293b',
                900: '#0f172a',
              }
            },
            animation: {
              'fade-in': 'fadeIn 0.5s ease-out',
              'slide-up': 'slideUp 0.6s ease-out',
            },
            keyframes: {
              fadeIn: {
                '0%': { opacity: '0', transform: 'translateY(10px)' },
                '100%': { opacity: '1', transform: 'translateY(0)' },
              },
              slideUp: {
                '0%': { opacity: '0', transform: 'translateY(30px)' },
                '100%': { opacity: '1', transform: 'translateY(0)' },
              }
            }
          }
        }
      }
    </script>
    <style>
      body {
        font-family: 'Inter', sans-serif;
      }
      .gradient-text {
        background: linear-gradient(135deg, #0ea5e9, #d946ef);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      .glass-effect {
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
      }
    </style>
</head>
<body class="bg-dark-900 text-white transition-colors duration-300">
    <!-- Theme Toggle Script -->
    <script>
      function initializeTheme() {
        const savedTheme = localStorage.getItem('theme');
        const theme = savedTheme || 'dark';
        
        if (theme === 'dark') {
          document.documentElement.classList.add('dark');
          document.body.classList.add('dark');
          document.body.className = 'bg-dark-900 text-white transition-colors duration-300';
        } else {
          document.documentElement.classList.remove('dark');
          document.body.classList.remove('dark');
          document.body.className = 'bg-gray-50 text-gray-900 transition-colors duration-300';
        }
        
        localStorage.setItem('theme', theme);
      }
      
      initializeTheme();
    </script>

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 glass-effect bg-dark-800/80 border-b border-dark-700">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
          <div class="flex items-center space-x-4">
            <a href="/admin-dashboard" class="flex items-center space-x-2 text-primary-400 hover:text-primary-300 transition-colors duration-200">
              <span class="material-symbols-outlined">arrow_back</span>
              <span class="hidden sm:inline">Dashboard</span>
            </a>
            <div class="flex items-center space-x-2">
              <div class="w-8 h-8 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-lg flex items-center justify-center">
                <span class="material-symbols-outlined text-white text-lg">quiz</span>
              </div>
              <h1 class="text-xl md:text-2xl font-bold gradient-text">QUIZIFY</h1>
            </div>
          </div>
          
          <form action="/logout" method="post">
            <button class="px-3 md:px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors duration-200 text-sm md:text-base">
              <span class="material-symbols-outlined md:mr-2">logout</span>
              <span class="hidden md:inline">Logout</span>
            </button>
          </form>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-20 pb-8 px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto">
        <div class="glass-effect bg-dark-800/50 border border-dark-700 rounded-2xl p-6 md:p-8 animate-fade-in">
          <!-- Header -->
          <div class="text-center mb-8">
            <div class="w-16 h-16 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-2xl flex items-center justify-center mx-auto mb-4">
              <span class="material-symbols-outlined text-white text-2xl">add_box</span>
            </div>
            <h2 class="text-2xl md:text-3xl font-bold text-white mb-2">Create New Quiz</h2>
            <p class="text-dark-300">Set up a new quiz for your students</p>
          </div>

          <!-- Form -->
          <form action="/created" method="post" class="space-y-6">
            <!-- Quiz Title -->
            <div class="space-y-2">
              <label for="title" class="block text-sm font-medium text-white">
                Quiz Title <span class="text-red-400">*</span>
              </label>
              <input type="text" 
                     id="title"
                     name="title" 
                     class="w-full px-4 py-3 bg-dark-700/50 border border-dark-600 rounded-xl text-white placeholder-dark-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200" 
                     placeholder="Enter an engaging quiz title"
                     required>
              <p class="text-xs text-dark-400">Choose a clear, descriptive title for your quiz</p>
            </div>

            <!-- Grid for Number of Questions and Time -->
            <div class="grid md:grid-cols-2 gap-6">
              <!-- Number of Questions -->
              <div class="space-y-2">
                <label for="que" class="block text-sm font-medium text-white">
                  Number of Questions <span class="text-red-400">*</span>
                </label>
                <input type="number" 
                       id="que"
                       name="que" 
                       class="w-full px-4 py-3 bg-dark-700/50 border border-dark-600 rounded-xl text-white placeholder-dark-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200" 
                       placeholder="e.g., 10"
                       min="1" 
                       max="100"
                       required>
                <p class="text-xs text-dark-400">How many questions will this quiz have?</p>
              </div>

              <!-- Time Limit -->
              <div class="space-y-2">
                <label for="time" class="block text-sm font-medium text-white">
                  Time Limit (Minutes) <span class="text-red-400">*</span>
                </label>
                <input type="number" 
                       id="time"
                       name="time" 
                       class="w-full px-4 py-3 bg-dark-700/50 border border-dark-600 rounded-xl text-white placeholder-dark-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200" 
                       placeholder="e.g., 30"
                       min="1"
                       max="300"
                       required>
                <p class="text-xs text-dark-400">Time students have to complete the quiz</p>
              </div>
            </div>

            <!-- Quiz Preview -->
            <div class="bg-dark-700/30 rounded-xl p-4 border border-dark-600">
              <h3 class="text-lg font-semibold text-white mb-3 flex items-center">
                <span class="material-symbols-outlined mr-2 text-primary-400">preview</span>
                Quiz Preview
              </h3>
              <div class="space-y-2 text-sm text-dark-300">
                <div class="flex justify-between">
                  <span>Title:</span>
                  <span id="preview-title" class="text-white">-</span>
                </div>
                <div class="flex justify-between">
                  <span>Questions:</span>
                  <span id="preview-questions" class="text-white">-</span>
                </div>
                <div class="flex justify-between">
                  <span>Time Limit:</span>
                  <span id="preview-time" class="text-white">-</span>
                </div>
                <div class="flex justify-between">
                  <span>Estimated Duration:</span>
                  <span id="preview-duration" class="text-primary-400">-</span>
                </div>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-col sm:flex-row gap-4 pt-6">
              <a href="/admin-dashboard" 
                 class="flex-1 px-6 py-3 bg-dark-600 hover:bg-dark-500 text-white rounded-xl font-medium transition-colors duration-200 text-center">
                <span class="material-symbols-outlined mr-2">cancel</span>
                Cancel
              </a>
              <button type="submit" 
                      class="flex-1 px-6 py-3 bg-gradient-to-r from-primary-500 to-secondary-500 hover:from-primary-600 hover:to-secondary-600 text-white rounded-xl font-semibold transition-all duration-200 transform hover:scale-105">
                <span class="material-symbols-outlined mr-2">add_circle</span>
                Create Quiz
              </button>
            </div>
          </form>
        </div>
      </div>
    </main>

    <script>
      // Real-time preview updates
      document.addEventListener('DOMContentLoaded', function() {
        const titleInput = document.getElementById('title');
        const questionsInput = document.getElementById('que');
        const timeInput = document.getElementById('time');
        
        const previewTitle = document.getElementById('preview-title');
        const previewQuestions = document.getElementById('preview-questions');
        const previewTime = document.getElementById('preview-time');
        const previewDuration = document.getElementById('preview-duration');

        function updatePreview() {
          previewTitle.textContent = titleInput.value || '-';
          previewQuestions.textContent = questionsInput.value ? `${questionsInput.value} questions` : '-';
          previewTime.textContent = timeInput.value ? `${timeInput.value} minutes` : '-';
          
          // Calculate estimated duration per question
          if (questionsInput.value && timeInput.value) {
            const timePerQuestion = Math.round(timeInput.value / questionsInput.value * 10) / 10;
            previewDuration.textContent = `~${timePerQuestion} min per question`;
          } else {
            previewDuration.textContent = '-';
          }
        }

        titleInput.addEventListener('input', updatePreview);
        questionsInput.addEventListener('input', updatePreview);
        timeInput.addEventListener('input', updatePreview);

        // Form validation
        const form = document.querySelector('form');
        form.addEventListener('submit', function(e) {
          const title = titleInput.value.trim();
          const questions = parseInt(questionsInput.value);
          const time = parseInt(timeInput.value);

          if (!title) {
            e.preventDefault();
            alert('Please enter a quiz title');
            titleInput.focus();
            return;
          }

          if (!questions || questions < 1) {
            e.preventDefault();
            alert('Please enter a valid number of questions (at least 1)');
            questionsInput.focus();
            return;
          }

          if (!time || time < 1) {
            e.preventDefault();
            alert('Please enter a valid time limit (at least 1 minute)');
            timeInput.focus();
            return;
          }

          // Check if time per question is reasonable
          const timePerQuestion = time / questions;
          if (timePerQuestion < 0.5) {
            if (!confirm(`This gives students only ${Math.round(timePerQuestion * 60)} seconds per question. Are you sure?`)) {
              e.preventDefault();
              return;
            }
          }
        });

        // Input validation
        questionsInput.addEventListener('input', function() {
          if (this.value > 100) {
            this.value = 100;
          }
        });

        timeInput.addEventListener('input', function() {
          if (this.value > 300) {
            this.value = 300;
          }
        });
      });
    </script>
</body>
</html>